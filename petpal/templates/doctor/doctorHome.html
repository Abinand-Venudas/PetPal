{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Doctor Portal | PetPal</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    * { font-family: "Inter", sans-serif; }

    body { background: #f6f8fb; }

    /* Sidebar */
    .sidebar {
      background: #0b1324;
      border-right: 1px solid #0f172a;
    }
    .sidebar a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 8px;
      color: #cbd5e1;
      font-weight: 500;
      transition: .2s;
    }
    .sidebar a:hover,
    .sidebar .active {
      background: #0f1c38;
      color: #ffffff;
    }

    /* Panels */
    .panel {
      background: #ffffff;
      border-radius: 14px;
      border: 1px solid #e5eaf1;
    }

    /* Titles */
    .h-title {
      font-size: 1.4rem;
      font-weight: 700;
      color: #0f172a;
    }
    .h-sub {
      font-size: .85rem;
      color: #64748b;
    }

    /* Badges */
    .badge {
      padding: 4px 12px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
    }
    .badge-pending { background: #fff7ed; color: #ea580c; }
    .badge-confirmed { background: #eff6ff; color: #2563eb; }
    .badge-completed { background: #ecfdf5; color: #059669; }
    .badge-cancelled { background: #fef2f2; color: #dc2626; }

    /* Buttons */
    .btn-primary {
      background: #1d4ed8;
      color: white;
      padding: 8px 18px;
      border-radius: 8px;
      font-weight: 600;
    }
    .btn-primary:hover { background: #1e40af; }

    .btn-danger {
      background: #b91c1c;
      color: white;
      padding: 8px 18px;
      border-radius: 8px;
      font-weight: 600;
    }
    .btn-danger:hover { background: #7f1d1d; }

    /* Appointment rows */
    .row-card {
      background: #f9fbff;
      border: 1px solid #e6ecf5;
      border-radius: 10px;
      padding: 16px 18px;
    }
    .row-card:hover {
      background: #ffffff;
    }
  </style>
</head>

<body class="min-h-screen flex">

<!-- ================= SIDEBAR ================= -->
<aside class="sidebar w-64 min-h-screen p-6 flex flex-col justify-between">

  <div>
    <!-- Brand -->
    <div class="mb-12">
      <div class="text-white text-lg font-extrabold tracking-wide">PetPal</div>
      <div class="text-slate-400 text-xs tracking-wider uppercase">Doctor Portal</div>
    </div>

    <!-- Navigation -->
    <nav class="space-y-1 text-sm">
      <a href="#dashboard" class="active">Dashboard</a>
      <a href="#appointments">Appointments</a>
      <a href="#profile">Profile</a>
      <a href="#security">Security</a>
      <a href="#support">Support</a>
    </nav>
  </div>

  <!-- Logout -->
  <a href="{% url 'doctor:doctorLogin' %}"
     class="text-sm bg-slate-800 hover:bg-slate-700 text-white text-center py-2 rounded-lg font-semibold">
    Logout
  </a>
</aside>

<!-- ================= MAIN ================= -->
<main class="flex-1 p-10 space-y-10">

<!-- ================= DASHBOARD ================= -->
<section id="dashboard" class="panel p-8">
  <div class="flex justify-between items-center">

    <!-- Doctor Info -->
    <div class="flex items-center gap-6">
      <div class="w-16 h-16 rounded-lg bg-blue-700 flex items-center justify-center text-white text-2xl font-bold">
        {{ doctor.name|slice:":1" }}
      </div>
      <div>
        <div class="text-xl font-bold text-slate-900">Dr. {{ doctor.name }}</div>
        <div class="text-slate-600 text-sm">{{ doctor.specialization }}</div>
        <div class="text-xs text-blue-700 font-semibold mt-1">
          Licensed Veterinary Doctor
        </div>
      </div>
    </div>

    <!-- Status Buttons -->
    <div class="flex gap-3">
      <a href="{% url 'doctor:doctoractive' %}" class="btn-primary">Check In</a>
      <a href="{% url 'doctor:doctorcheckout' %}" class="btn-danger">Check Out</a>
    </div>

  </div>

  <!-- Status Line -->
  <div class="mt-4 text-sm text-slate-600">
    {% if doctor.is_active %}
      Status: <span class="text-green-700 font-semibold">Available for consultations</span>
    {% else %}
      Status: <span class="text-red-700 font-semibold">Offline</span>
    {% endif %}
  </div>
</section>

<!-- ================= APPOINTMENTS ================= -->
<section id="appointments" class="panel p-8">
  <div class="mb-6">
    <div class="h-title">Appointments</div>
    <div class="h-sub">Consultation management</div>
  </div>

  {% if appointments %}
  <div class="space-y-3">
    {% for app in appointments %}
    <div class="row-card flex justify-between items-center">

      <!-- Appointment Info -->
      <div>
        <div class="font-semibold text-slate-800">
          {{ app.pet_name }}
          <span class="text-slate-500 text-sm">({{ app.pet_type }})</span>
        </div>
        <div class="text-sm text-slate-500">
          {{ app.date }} • {{ app.time }} • {{ app.reason }}
        </div>

        <div class="mt-2">
          {% if app.status == "pending" %}
            <span class="badge badge-pending">Pending</span>
          {% elif app.status == "confirmed" %}
            <span class="badge badge-confirmed">Confirmed</span>
          {% elif app.status == "completed" %}
            <span class="badge badge-completed">Completed</span>
          {% elif app.status == "cancelled" %}
            <span class="badge badge-cancelled">Cancelled</span>
          {% endif %}
        </div>
      </div>

      <!-- Actions -->
      <div class="flex gap-2">
        {% if app.status == "pending" %}
          <a href="{% url 'doctor:updateAppointment' app.id 'confirmed' %}" class="btn-primary text-sm">
            Approve
          </a>
          <a href="{% url 'doctor:updateAppointment' app.id 'cancelled' %}" class="btn-danger text-sm">
            Decline
          </a>
        {% elif app.status == "confirmed" %}
          <a href="{% url 'doctor:updateAppointment' app.id 'completed' %}" class="btn-primary text-sm">
            Complete
          </a>
        {% endif %}
      </div>

    </div>
    {% endfor %}
  </div>
  {% else %}
    <div class="text-slate-500 text-center py-10">
      No appointments scheduled.
    </div>
  {% endif %}
</section>

<!-- ================= PROFILE ================= -->
<section id="profile" class="panel p-8">
  <div class="h-title mb-6">Professional Profile</div>

  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="text-sm font-medium text-slate-600">Full Name</label>
        <input type="text" name="name" value="{{ doctor.name }}" class="w-full mt-1 p-3 border rounded-md">
      </div>
      <div>
        <label class="text-sm font-medium text-slate-600">Email Address</label>
        <input type="email" name="email" value="{{ doctor.email }}" class="w-full mt-1 p-3 border rounded-md">
      </div>
      <div>
        <label class="text-sm font-medium text-slate-600">Phone</label>
        <input type="text" name="phone" value="{{ doctor.phone }}" class="w-full mt-1 p-3 border rounded-md">
      </div>
      <div>
        <label class="text-sm font-medium text-slate-600">Specialization</label>
        <input type="text" name="specialization" value="{{ doctor.specialization }}" class="w-full mt-1 p-3 border rounded-md">
      </div>
      <div>
        <label class="text-sm font-medium text-slate-600">Clinic Name</label>
        <input type="text" name="clinic" value="{{ doctor.clinic }}" class="w-full mt-1 p-3 border rounded-md">
      </div>
      <div>
        <label class="text-sm font-medium text-slate-600">City</label>
        <input type="text" name="city" value="{{ doctor.city }}" class="w-full mt-1 p-3 border rounded-md">
      </div>
    </div>

    <button class="mt-6 btn-primary">Update Profile</button>
  </form>
</section>

<!-- ================= SECURITY ================= -->
<section id="security" class="panel p-8">
  <div class="h-title mb-6">Account Security</div>

  <form method="POST">
    {% csrf_token %}
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <input type="password" name="current_password" placeholder="Current Password" class="p-3 border rounded-md">
      <input type="password" name="new_password" placeholder="New Password" class="p-3 border rounded-md">
      <input type="password" name="confirm_password" placeholder="Confirm Password" class="p-3 border rounded-md">
    </div>

    <button class="mt-6 btn-primary">Update Password</button>
  </form>
</section>

<!-- ================= SUPPORT ================= -->
<section id="support" class="panel p-8">
  <div class="h-title mb-2">Support Center</div>
  <div class="h-sub mb-4">Administrative communication</div>

  <textarea rows="4" placeholder="Describe your issue..."
            class="w-full p-4 border rounded-md"></textarea>

  <button class="mt-4 btn-primary">Submit Ticket</button>
</section>

</main>
</body>
</html>
