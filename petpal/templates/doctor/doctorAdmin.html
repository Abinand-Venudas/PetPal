{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin | Doctors</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 p-8">

<h1 class="text-3xl font-extrabold mb-6">Registered Doctors</h1>

<!-- SEARCH + FILTER -->
<form method="get" class="flex gap-4 mb-8">
  <input name="q" value="{{ query }}"
         placeholder="Search doctor..."
         class="px-4 py-2 border rounded-xl w-64">

  <select name="status" class="px-4 py-2 border rounded-xl">
    <option value="">All</option>
    <option value="active" {% if status == "active" %}selected{% endif %}>Active</option>
    <option value="inactive" {% if status == "inactive" %}selected{% endif %}>Inactive</option>
  </select>

  <button class="px-6 py-2 bg-indigo-600 text-white rounded-xl">
    Apply
  </button>
</form>

<!-- DOCTORS GRID -->
<div class="grid md:grid-cols-3 gap-6">

{% for doctor in page_obj %}
<div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition">

  <div class="flex items-center gap-4 mb-4">
    <img src="{{ doctor.image.url }}" class="w-16 h-16 rounded-full object-cover">
    <div>
      <h3 class="font-semibold">Dr. {{ doctor.name }}</h3>
      <p class="text-sm text-gray-500">{{ doctor.specialization }}</p>
    </div>
  </div>

  <!-- STATUS -->
  {% if doctor.is_active %}
    <span class="text-xs px-3 py-1 bg-green-100 text-green-700 rounded-full">
      Active
    </span>
  {% else %}
    <span class="text-xs px-3 py-1 bg-red-100 text-red-700 rounded-full">
      Inactive
    </span>
  {% endif %}

  <div class="mt-4 flex gap-2">
    <a href="{% url 'doctor:doctorHome' %}"
       class="flex-1 text-center py-2 bg-indigo-500 text-white rounded-xl">
      View
    </a>

    <a href="{% url 'deleteDoctor' doctor.id %}"
       onclick="return confirm('Remove this doctor?')"
       class="flex-1 text-center py-2 bg-red-500 text-white rounded-xl">
      Remove
    </a>
  </div>

</div>
{% empty %}
<p>No doctors found.</p>
{% endfor %}

</div>

<!-- PAGINATION -->
<div class="flex justify-center gap-4 mt-10">
{% if page_obj.has_previous %}
  <a href="?page={{ page_obj.previous_page_number }}" class="px-4 py-2 border rounded">
    Prev
  </a>
{% endif %}

<span class="px-4 py-2">{{ page_obj.number }}</span>

{% if page_obj.has_next %}
  <a href="?page={{ page_obj.next_page_number }}" class="px-4 py-2 border rounded">
    Next
  </a>
{% endif %}
</div>

</body>
</html>
