{% extends "user/base.html" %}
{% load static %}

{% block title %}PetPal ‚Äì Pet Details{% endblock %}

{% block extra_css %}
<style>
*{margin:0;padding:0;box-sizing:border-box}

/* Background */
body{
  background:linear-gradient(135deg,#eef1ff,#ffe6f5);
  overflow-x:hidden;
}

/* Background blobs */
.blob{
  position:fixed;
  width:420px;height:420px;
  border-radius:50%;
  filter:blur(120px);
  opacity:.45;
  z-index:-1;
}
.blob.one{background:#818cf8;top:-120px;left:-120px}
.blob.two{background:#f472b6;bottom:-120px;right:-120px}

/* Glass */
.glass{
  background:rgba(255,255,255,.82);
  backdrop-filter:blur(20px);
  border-radius:28px;
}

/* Fade animation */
@keyframes fadeUp{
  from{opacity:0;transform:translateY(24px)}
  to{opacity:1;transform:translateY(0)}
}
.fade{animation:fadeUp .7s ease forwards}

/* ===== DARK MODE SUPPORT ===== */
.dark body{
  background:
    radial-gradient(circle at top left,#1e293b,#020617 60%),
    radial-gradient(circle at bottom right,#312e81,#020617 60%);
}

.dark .glass{
  background:rgba(2,6,23,.9);
  border:1px solid rgba(255,255,255,.15);
  box-shadow:0 40px 120px rgba(0,0,0,.85);
}

/* ===== GLOW CTA ===== */
.glow-btn{
  background:linear-gradient(135deg,#6366f1,#ec4899);
  color:white;
  font-weight:700;
  box-shadow:0 0 0 rgba(236,72,153,.4);
  animation:pulseGlow 1.8s infinite;
}
@keyframes pulseGlow{
  0%{box-shadow:0 0 0 0 rgba(236,72,153,.5)}
  70%{box-shadow:0 0 0 16px rgba(236,72,153,0)}
  100%{box-shadow:0 0 0 0 rgba(236,72,153,0)}
}

/* ===== DISABLED BUTTON ===== */
.btn-disabled{
  background:#d1d5db;
  color:#6b7280;
  cursor:not-allowed;
}
</style>
{% endblock %}

{% block content %}

<div class="blob one"></div>
<div class="blob two"></div>

<section class="max-w-7xl mx-auto px-6 py-24">

  <div class="grid lg:grid-cols-2 gap-16 items-start fade">

    <!-- PET IMAGE -->
    <div class="glass shadow-2xl overflow-hidden relative">
      <img src="{{ pet.image.url }}" class="w-full h-[520px] object-cover">
      {% if pet.vaccinated %}
      <div class="absolute top-6 left-6 bg-green-600 text-white px-5 py-2 rounded-full shadow">
        ‚úî Vaccinated
      </div>
      {% endif %}
    </div>

    <!-- PET DETAILS -->
    <div class="glass shadow-2xl p-10">

      <h1 class="text-5xl font-extrabold text-indigo-700 mb-4">
        {{ pet.name }}
      </h1>

      <p class="text-gray-500 text-lg mb-6">
        {{ pet.pet_type }} ‚Ä¢ {{ pet.age }} Years
      </p>

      <!-- INFO GRID -->
      <div class="grid sm:grid-cols-2 gap-6 mb-10">
        <div>
          <p class="text-sm text-gray-400">Pet Type</p>
          <p class="font-semibold">{{ pet.pet_type }}</p>
        </div>
        <div>
          <p class="text-sm text-gray-400">Age</p>
          <p class="font-semibold">{{ pet.age }} Years</p>
        </div>
        <div>
          <p class="text-sm text-gray-400">Vaccination</p>
          <p class="font-semibold text-green-600">
            {% if pet.vaccinated %}Completed{% else %}Pending{% endif %}
          </p>
        </div>
      </div>

      <!-- DESCRIPTION -->
      <div class="mb-10">
        <h3 class="text-xl font-bold mb-3">About {{ pet.name }}</h3>
        <p class="text-gray-600 leading-relaxed">
          {{ pet.description }}
        </p>
      </div>

      <!-- ACTIONS -->
      {% if adoption %}
      <!-- ALREADY REQUESTED -->
      <div class="space-y-6">

        <div class="p-4 rounded-xl bg-green-50 border border-green-200 text-green-700 font-semibold">
          ‚úÖ You‚Äôve already requested adoption for this pet.
        </div>

        <div class="flex gap-5">

          <!-- üîí DISABLED BUTTON -->
          <button class="w-1/2 py-4 rounded-xl font-semibold btn-disabled" disabled>
            Request Adoption
          </button>

          <!-- üåü GLOWING TRACK CTA -->
          <a href="{% url 'petapp:adoptionSuccess' adoption.id %}"
             class="w-1/2 py-4 rounded-xl font-semibold text-center glow-btn">
            Track Adoption
          </a>

        </div>

        <a href="{% url 'petapp:adoptionlist' %}"
           class="block text-center text-indigo-600 font-semibold hover:underline">
          ‚Üê Back to List
        </a>

      </div>

      {% else %}
      <!-- NOT REQUESTED YET -->
      <form method="POST" action="{% url 'petapp:adoptPet' pet.id %}" class="space-y-6">
        {% csrf_token %}

        <div>
          <label class="block text-sm font-semibold mb-2">Preferred Visit Date</label>
          <input type="date" name="visit_date" required
                 class="w-full px-4 py-3 rounded-xl border shadow-sm">
        </div>

        <div class="flex gap-5">
          <button type="submit"
            class="w-1/2 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-semibold shadow-lg">
            Request Adoption
          </button>

          <a href="{% url 'petapp:adoptionlist' %}"
            class="w-1/2 py-4 border border-indigo-300 text-indigo-700 rounded-xl font-semibold hover:bg-indigo-50 text-center">
            Back to List
          </a>
        </div>
      </form>
      {% endif %}

    </div>
  </div>
</section>

{% endblock %}
