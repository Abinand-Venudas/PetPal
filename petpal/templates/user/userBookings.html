{% extends "user/base.html" %}
{% load static %}

{% block title %}My Activity — PetPal{% endblock %}

{% block extra_css %}
<style>
/* ================= LAYOUT ================= */
.page-wrap{
  max-width:1200px;
  margin:auto;
  padding:60px 24px;
}

/* ================= HEADER ================= */
.page-header{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-bottom:50px;
}

.page-title{
  font-size:2.6rem;
  font-weight:900;
  color:#0f172a;
}
.dark .page-title{color:#f8fafc;}

.page-sub{
  color:#64748b;
  font-size:1rem;
}
.dark .page-sub{color:#cbd5e1;}

/* ================= TIMELINE ================= */
.timeline{
  position:relative;
  padding-left:40px;
}

.timeline::before{
  content:"";
  position:absolute;
  left:12px;
  top:0;
  bottom:0;
  width:2px;
  background:linear-gradient(to bottom,#6366f1,#ec4899);
}

/* ================= BLOCK ================= */
.block{
  margin-bottom:50px;
}

.block-title{
  font-size:1.5rem;
  font-weight:800;
  margin-bottom:20px;
  color:#0f172a;
}
.dark .block-title{color:#f8fafc;}

/* ================= ITEM ================= */
.item{
  position:relative;
  padding:20px 24px;
  margin-bottom:20px;
  background:#ffffff;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.06);
  border:1px solid #f1f5f9;
}
.dark .item{
  background:#0f172a;
  border:1px solid #1e293b;
  box-shadow:0 15px 40px rgba(0,0,0,.7);
}

.item::before{
  content:"";
  position:absolute;
  left:-34px;
  top:28px;
  width:14px;
  height:14px;
  border-radius:50%;
  background:linear-gradient(135deg,#6366f1,#ec4899);
  box-shadow:0 0 0 6px rgba(99,102,241,.15);
}

/* ================= GRID ================= */
.item-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px 24px;
}

/* ================= TEXT ================= */
.label{
  font-size:.8rem;
  font-weight:700;
  color:#64748b;
  text-transform:uppercase;
}
.dark .label{color:#cbd5e1;}

.value{
  font-size:.95rem;
  font-weight:700;
  color:#0f172a;
}
.dark .value{color:#f8fafc;}

/* ================= STATUS ================= */
.status{
  margin-top:14px;
  display:inline-block;
  padding:6px 14px;
  border-radius:999px;
  font-size:.75rem;
  font-weight:800;
}

.status-success{background:#dcfce7;color:#166534;}
.status-pending{background:#fef9c3;color:#854d0e;}
.status-cancel{background:#fee2e2;color:#991b1b;}

.dark .status-success{background:#064e3b;color:#6ee7b7;}
.dark .status-pending{background:#78350f;color:#fde68a;}
.dark .status-cancel{background:#3f1d1d;color:#fecaca;}

/* ================= EMPTY ================= */
.empty{
  padding:30px;
  border-radius:16px;
  background:#f8fafc;
  text-align:center;
  color:#94a3b8;
}
.dark .empty{
  background:#0f172a;
  border:1px solid #1e293b;
}
</style>
{% endblock %}

{% block content %}
<section class="page-wrap">

<div class="page-header">
  <div class="page-title">My Activity</div>
  <div class="page-sub">All your bookings and services in one timeline</div>
</div>

<div class="timeline">

<!-- ================= CONSULTATIONS ================= -->
<div class="block">
  <div class="block-title">Consultations</div>

  {% if bookings %}
    {% for b in bookings %}
    <div class="item">
      <div class="item-grid">
        <div><div class="label">Doctor</div><div class="value">{{ b.doctor.name }}</div></div>
        <div><div class="label">Date</div><div class="value">{{ b.date }}</div></div>
        <div><div class="label">Time</div><div class="value">{{ b.time }}</div></div>
        <div><div class="label">Issue</div><div class="value">{{ b.reason|truncatechars:30 }}</div></div>
      </div>

      <div class="status
        {% if b.status == 'Approved' %}status-success
        {% elif b.status == 'pending' or b.status == 'Pending' %}status-pending
        {% else %}status-cancel{% endif %}">
        {{ b.status|upper }}
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="empty">No consultations yet</div>
  {% endif %}
</div>

<!-- ================= DAYCARE ================= -->
<div class="block">
  <div class="block-title">Daycare</div>

  {% if daycare_bookings %}
    {% for d in daycare_bookings %}
    <div class="item">
      <div class="item-grid">
        <div><div class="label">Pet</div><div class="value">{{ d.pet_name }}</div></div>
        <div><div class="label">Date</div><div class="value">{{ d.date }}</div></div>
        <div><div class="label">Plan</div><div class="value">{{ d.plan }}</div></div>
        <div><div class="label">Duration</div><div class="value">{{ d.duration }}</div></div>
        <div><div class="label">Cost</div><div class="value">₹{{ d.total_cost }}</div></div>
      </div>

      <div class="status
        {% if d.status == 'Confirmed' %}status-success
        {% elif d.status == 'Pending' %}status-pending
        {% else %}status-cancel{% endif %}">
        {{ d.status|upper }}
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="empty">No daycare bookings yet</div>
  {% endif %}
</div>

<!-- ================= GROOMING ================= -->
<div class="block">
  <div class="block-title">Grooming</div>

  {% if grooming_bookings %}
    {% for g in grooming_bookings %}
    <div class="item">
      <div class="item-grid">
        <div><div class="label">Date</div><div class="value">{{ g.date }}</div></div>
        <div><div class="label">Time</div><div class="value">{{ g.time }}</div></div>
        <div><div class="label">Phone</div><div class="value">{{ g.phone }}</div></div>
        <div><div class="label">Total</div><div class="value">₹{{ g.total }}</div></div>
      </div>

      <div class="status status-success">
        CONFIRMED
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="empty">No grooming bookings yet</div>
  {% endif %}
</div>

</div>

</section>
{% endblock %}
