{% extends "petadmin/baseAdmin.html" %}
{% block content %}

<div class="max-w-4xl mx-auto p-10">
  <h1 class="text-3xl font-extrabold text-indigo-700 mb-6">
    Adoption Request
  </h1>

  <div class="bg-white rounded-3xl shadow-xl p-10">

    <div class="flex justify-between mb-8">
      <h2 class="text-xl font-bold">Request Details</h2>

      <span class="px-4 py-2 rounded-full text-sm font-bold
        {% if adoption.status == 'Pending' %}bg-yellow-100 text-yellow-700
        {% elif adoption.status == 'Approved' %}bg-green-100 text-green-700
        {% elif adoption.status == 'Visited' %}bg-blue-100 text-blue-700
        {% else %}bg-red-100 text-red-700{% endif %}
      ">
        {{ adoption.status }}
      </span>
    </div>

    <div class="grid grid-cols-2 gap-6">
      <div class="p-4 border rounded-xl">
        <p class="text-gray-500">User</p>
        <p class="font-bold">{{ adoption.user.name }}</p>
      </div>

      <div class="p-4 border rounded-xl">
        <p class="text-gray-500">Email</p>
        <p class="font-bold">{{ adoption.user.email }}</p>
      </div>

      <div class="p-4 border rounded-xl">
        <p class="text-gray-500">Pet</p>
        <p class="font-bold">{{ adoption.pet.name }}</p>
      </div>

      <div class="p-4 border rounded-xl">
        <p class="text-gray-500">Visit Date</p>

        {% if adoption.visit_date %}
          <p class="font-bold">
            {{ adoption.visit_date|date:"M d, Y" }}
          </p>
        {% else %}
          <p class="italic text-gray-400">
            Not scheduled yet
          </p>
        {% endif %}
      </div>
    </div>

    <div class="flex justify-between mt-10">
      <a href="{% url 'petadmin:adminAdoptions' %}"
         class="px-6 py-3 border rounded-xl">
        ‚Üê Back
      </a>

      <div class="flex gap-4">

        {% if adoption.status == "Pending" %}
          <a href="{% url 'petadmin:update_adoption_status' adoption.id 'Approved' %}"
             class="px-6 py-3 bg-green-600 text-white rounded-xl">
            ‚úÖ Approve
          </a>

          <a href="{% url 'petadmin:update_adoption_status' adoption.id 'Rejected' %}"
             class="px-6 py-3 bg-red-600 text-white rounded-xl">
            ‚ùå Reject
          </a>

          <form method="post"
                action="{% url 'petadmin:deleteAdoptionRequest' adoption.id %}">
            {% csrf_token %}
            <button class="px-6 py-3 bg-gray-800 text-white rounded-xl">
              üóë Delete
            </button>
          </form>

        {% elif adoption.status == "Approved" %}
          <a href="{% url 'petadmin:update_adoption_status' adoption.id 'Visited' %}"
             class="px-6 py-3 bg-indigo-600 text-white rounded-xl">
            üêæ Mark Visited
          </a>

        {% else %}
          <span class="px-6 py-3 bg-gray-200 rounded-xl">
            No actions available
          </span>
        {% endif %}

      </div>
    </div>

  </div>
</div>

{% endblock %}
