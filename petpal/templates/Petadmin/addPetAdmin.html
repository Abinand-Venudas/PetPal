{% extends "petadmin/baseAdmin.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}

<div class="mb-10">
  <h1 class="text-4xl font-extrabold">{{ title }}</h1>
  <p class="text-gray-500 mt-2">
    Manage adoption pet information
  </p>
</div>

<form method="post" enctype="multipart/form-data"
      class="max-w-5xl glass rounded-3xl p-10 shadow-lg">
{% csrf_token %}

<div class="grid md:grid-cols-2 gap-10">

  <!-- LEFT -->
  <div class="space-y-6">

    <input type="text" name="name" value="{{ pet.name|default:'' }}"
      placeholder="Pet Name"
      class="w-full px-5 py-4 rounded-xl border focus:ring-2 focus:ring-indigo-400" required>

    <input type="text" name="pet_type" value="{{ pet.pet_type|default:'' }}"
      placeholder="Pet Type (Dog, Cat)"
      class="w-full px-5 py-4 rounded-xl border focus:ring-2 focus:ring-indigo-400" required>

    <input type="number" name="age" value="{{ pet.age|default:'' }}"
      placeholder="Age"
      class="w-full px-5 py-4 rounded-xl border focus:ring-2 focus:ring-indigo-400" required>

    <textarea name="description" rows="4"
      placeholder="Description"
      class="w-full px-5 py-4 rounded-xl border focus:ring-2 focus:ring-indigo-400">{{ pet.description }}</textarea>

    <!-- STATUS -->
    <select name="status"
      class="w-full px-5 py-4 rounded-xl border focus:ring-2 focus:ring-indigo-400">
      <option value="available" {% if pet.status == "available" %}selected{% endif %}>Available</option>
      <option value="adopted" {% if pet.status == "adopted" %}selected{% endif %}>Adopted</option>
      <option value="hidden" {% if pet.status == "hidden" %}selected{% endif %}>Hidden</option>
    </select>

    <label class="flex items-center gap-3 font-medium">
      <input type="checkbox" name="vaccinated"
             class="w-5 h-5 accent-indigo-600"
             {% if pet.vaccinated %}checked{% endif %}>
      Vaccinated
    </label>

  </div>

  <!-- RIGHT -->
  <div class="space-y-6">

    <div class="rounded-2xl overflow-hidden border bg-white">
      <img id="preview"
           src="{% if pet.image %}{{ pet.image.url }}{% else %}{% static 'img/default-pet.png' %}{% endif %}"
           class="w-full h-64 object-cover">
    </div>

    <input type="file" name="image" accept="image/*"
           onchange="previewImage(event)"
           class="w-full px-4 py-3 rounded-xl border">

  </div>

</div>

<div class="flex gap-4 mt-10">
  <button class="px-8 py-4 rounded-xl text-white font-semibold
                 bg-gradient-to-r from-indigo-600 to-pink-500">
    Save Pet
  </button>

  <a href="{% url 'petadmin:adoptionPetsAdmin' %}"
     class="px-8 py-4 rounded-xl bg-gray-100 font-semibold">
    Cancel
  </a>
</div>

</form>

<script>
function previewImage(event){
  const reader = new FileReader();
  reader.onload = () => {
    document.getElementById("preview").src = reader.result;
  }
  reader.readAsDataURL(event.target.files[0]);
}
</script>

{% endblock %}
