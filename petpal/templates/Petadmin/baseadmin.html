{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    console.log("Chart.js loaded:", typeof Chart);
  </script>

<meta charset="UTF-8">
<title>{% block title %}PetPal Admin{% endblock %}</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
body{
  font-family:"Poppins",sans-serif;
  background:
    radial-gradient(circle at top right,#eef2ff,transparent 45%),
    radial-gradient(circle at bottom left,#fde7f3,transparent 45%),
    #f8fafc;
}

/* ================= GLASS ================= */
.glass{
  background:rgba(255,255,255,.82);
  backdrop-filter:blur(16px);
  border:1px solid rgba(255,255,255,.55);
}

/* ================= SIDEBAR ================= */
#sidebar{
  width:18rem;
  transition:.25s ease;
}
#sidebar.collapsed{
  width:5.5rem;
}
#sidebar.collapsed span,
#sidebar.collapsed h2{
  display:none;
}
.sidebar a{
  display:flex;
  align-items:center;
  gap:14px;
}
.sidebar a:hover{
  background:linear-gradient(135deg,#6366f1,#ec4899);
  color:white;
}

/* ================= FAST UI ================= */
*{
  transition-duration:0.15s !important;
  animation-duration:0.25s !important;
}

/* ================= SKELETON LOADER ================= */
.skeleton{
  position:relative;
  overflow:hidden;
  background:#e5e7eb;
  border-radius:8px;
}
.skeleton::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(
    100deg,
    transparent 40%,
    rgba(255,255,255,.6) 50%,
    transparent 60%
  );
  animation:shimmer 1.2s infinite;
}

@keyframes shimmer{
  from{transform:translateX(-100%)}
  to{transform:translateX(100%)}
}

/* ================= PAGE SKELETON ================= */
#page-skeleton{
  position:absolute;
  inset:0;
  background:#f8fafc;
  z-index:50;
  padding:40px;
}
.skel-card{
  height:120px;
  margin-bottom:20px;
}
.skel-line{
  height:16px;
  margin-bottom:12px;
  width:100%;
}
.skel-line.sm{width:60%;}
.skel-line.xs{width:40%;}

/* Hide skeleton when page ready */
body.loaded #page-skeleton{
  display:none;
}
</style>

</head>

<body>

<!-- ================= PAGE SKELETON ================= -->
<div id="page-skeleton">
  <div class="skeleton skel-line sm"></div>
  <div class="skeleton skel-line xs"></div>

  <div class="mt-10">
    <div class="skeleton skel-card"></div>
    <div class="skeleton skel-card"></div>
    <div class="skeleton skel-card"></div>
  </div>
</div>

<div class="flex min-h-screen">

<!-- SIDEBAR -->
<aside id="sidebar" class="glass px-8 py-12 sidebar hidden md:block">

  <button onclick="toggleSidebar()"
          class="mb-8 p-3 rounded-xl bg-indigo-100 text-indigo-600">
    <i data-lucide="menu"></i>
  </button>

  <h2 class="text-4xl font-extrabold text-indigo-600 mb-14">PetPal</h2>

  <nav class="space-y-4 text-sm font-semibold">

    <a href="{% url 'petadmin:homeAdmin' %}" class="px-5 py-3 rounded-xl">
      <i data-lucide="layout-dashboard"></i><span>Dashboard</span>
    </a>

    <a href="{% url 'petadmin:doctorAdmin' %}" class="px-5 py-3 rounded-xl">
      <i data-lucide="stethoscope"></i><span>Doctors</span>
    </a>

    <a href="{% url 'petadmin:volunteerAdmin' %}" class="px-5 py-3 rounded-xl">
      <i data-lucide="scissors"></i><span>Volunteers</span>
    </a>

    <a href="{% url 'petadmin:userAdmin' %}" class="px-5 py-3 rounded-xl">
      <i data-lucide="users"></i><span>Users</span>
    </a>

    <a href="{% url 'petadmin:adoptionPetsAdmin' %}" class="px-5 py-3 rounded-xl">
      <i data-lucide="paw-print"></i><span>Adoption Pets</span>
    </a>

    <a href="{% url 'petadmin:serviceAdmin' %}" class="px-5 py-3 rounded-xl">
      <i data-lucide="paw-print"></i><span>Services</span>
    </a>
    <!-- LOGOUT -->
    <form method="post" action="{% url 'petadmin:logoutAdmin' %}" class="pt-8">
      {% csrf_token %}
      <button
        type="submit"
        onclick="return confirm('Are you sure you want to logout?')"
        class="w-full px-5 py-3 rounded-xl flex items-center gap-3
               text-red-600 hover:text-white
               hover:bg-gradient-to-r hover:from-red-500 hover:to-pink-500">
        <i data-lucide="log-out"></i>
        <span>Logout</span>
      </button>
    </form>

  </nav>
</aside>

<!-- MAIN CONTENT -->
<main class="flex-1 px-12 py-10 relative">
  {% block content %}{% endblock %}
</main>

</div>

<script>
lucide.createIcons();

function toggleSidebar(){
  document.getElementById("sidebar").classList.toggle("collapsed");
}

/* ================= SKELETON AUTO HIDE ================= */
window.addEventListener("load", () => {
  document.body.classList.add("loaded");
});
/* ================= SKELETON AUTO HIDE ================= */
window.addEventListener("load", () => {
  document.body.classList.add("loaded");
});

/* ================= FIX FOR BACK BUTTON (bfcache) ================= */
window.addEventListener("pageshow", function (event) {
  if (event.persisted) {
    // Page restored from cache -> hide skeleton immediately
    document.body.classList.add("loaded");
  }
});
</script>

{% block extra_js %}{% endblock %}
</body>
</html>
