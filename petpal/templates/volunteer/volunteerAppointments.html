{% extends "volunteer/baseVolunteer.html" %}

{% block title %}Appointments{% endblock %}
{% block header_title %}Appointments{% endblock %}
{% block header_subtitle %}Assigned Grooming Services{% endblock %}

{% block content %}

<div class="mb-10">
    <h1 class="text-3xl font-extrabold text-slate-800">My Appointments</h1>
    <p class="text-slate-500 mt-2 max-w-2xl">
        Detailed grooming appointments assigned to you by the admin.
    </p>
</div>

{% if tasks %}

<div class="space-y-8">

{% for a in tasks %}
<div class="glass-card rounded-3xl p-8">

    <!-- HEADER -->
    <div class="flex justify-between items-start mb-6">
        <div>
            <h2 class="text-xl font-bold text-indigo-700">  
                ğŸ¾ Grooming Appointment
            </h2>
            <p class="text-sm text-gray-500 mt-1">
                Owner: {{ a.user.name }}
            </p>
        </div>

        {% if a.status == "Completed" %}
            <span class="px-4 py-1 rounded-full text-sm font-semibold
                         bg-green-100 text-green-700">
                âœ” Completed
            </span>
        {% else %}
            <span class="px-4 py-1 rounded-full text-sm font-semibold
                         bg-blue-100 text-blue-700">
                Assigned
            </span>
        {% endif %}
    </div>

    <!-- DETAILS -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">

        <div>
            <p class="text-xs text-gray-500 uppercase">Date</p>
            <p class="font-semibold mt-1">
                ğŸ“… {{ a.date|date:"M d, Y" }}
            </p>
        </div>

        <div>
            <p class="text-xs text-gray-500 uppercase">Time</p>
            <p class="font-semibold mt-1">
                â° {{ a.start_time|time:"h:i A" }} â€“ {{ a.end_time|time:"h:i A" }}
            </p>
        </div>

        <div>
            <p class="text-xs text-gray-500 uppercase">Service</p>
            <p class="font-semibold mt-1">
                âœ‚ {{ a.service_type|default:"Grooming" }}
            </p>
        </div>

        <div>
            <p class="text-xs text-gray-500 uppercase">Location</p>
            <p class="font-semibold mt-1">
                ğŸ“ PetPal Center
            </p>
        </div>

    </div>

    <!-- ACTION AREA -->
    <div class="mt-6 pt-6 border-t flex justify-between items-center">

        <div class="text-sm text-gray-500">
            Assigned by Admin â€¢ {{ a.created_at|date:"M d, Y" }}
        </div>

        {% if a.status == "Assigned" %}
        <form method="post"
              action="{% url 'volunteer:markAppointmentCompleted' a.id %}">
            {% csrf_token %}
            <button
                class="px-6 py-2 rounded-xl bg-indigo-600 text-white
                       font-semibold hover:bg-indigo-700 transition">
                âœ” Complete Appointment
            </button>
        </form>
        {% else %}
        <div class="text-sm font-semibold text-green-600">
            Appointment successfully completed
        </div>
        {% endif %}

    </div>

</div>
{% endfor %}

</div>

{% else %}

<div class="text-center py-32 text-gray-500">
    <p class="text-xl font-semibold">No Appointments Assigned</p>
    <p class="mt-2">Youâ€™ll see grooming details here once assigned.</p>
</div>

{% endif %}

{% endblock %}
